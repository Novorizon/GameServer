using Game.Protobuffer;
using Google.Protobuf;
using System;
using System.Collections.Generic;

namespace Net
{
    public static class ProtoUtils
    {
        private static List<uint> _protoId = new List<uint>
       {
            886593042,
            886885047,
            2710377623,
            2125651979,
            106677606,
            106969611,
            1178392331,
            877435033,
            1667207662,
            1597664336,
            3607587249,
            3607879254,
            2073228379,
            2288032317,
            2288324322,
            549788918,
            550014233,
            550080923,
            3174995466,
            3689849500,
            3690141505,
            2093934434,
            4210049195,
            2983359718,
            2983651723,
            2171585808,
            2171877813,
            3555713447,
            951042277,
            4087935962,
            295056376,
            295348381,
            2344249429,
            2344541434,
            2095320942,
            588519556,
            588811561,
            2095612947,
            216792128,
            45339267,
            2160282422,
            2160574427,
            3686526375,
            1393432232,
            785340400,
            785407090,
            758089069,
            164104276,
            4182678041,
            4182970046,
            2537588753,
            1785437646,
            173230967,
            121935706,
            1120511217,
            1120803222,
            4167657068,
            4167949073,
            2880637127,
            4255041178,
            4232976456,
            4233268461,
            4459234,
            3455826683,
            3456118688,
            56457226,
            2977032040,
            3594557289,
            3004757981,
            632078851,
            632370856,
            1369360669,
            1082824085,
            1083116090,
            676277639,
            676569644,
            1252109149,
            647510593,
            3458612134,
            3506819525,
            2506717741,
            3375369011,
            3375661016,
            3458904139,
            4100711083,
            4101003088,
            3826852552,
            3827144557,
            3646383917,
            3646675922,
            4269635191,
            3401444076,
            3401736081,
            1878071574,
            1762188444,
            3528409318,
            645357453,
            710657457,
            710949462,
            2265847943,
            2266139948,
            236235688,
            236527693,
            35986352,
            1812994133,
            1813286138,
            129052351,
            424616085,
            424908090,
            129344356,
            3467346729,
            3467638734,
            1051697520,
            1051989525,
            1978225553,
            1978517558,
            2364359968,
            2364651973,
            1298765115,
            1299057120,
            2784124526,
            2784416531,
            1652302216,
            3072748649,
            3511318755,
            2721616563,
            2721908568,
            2025315165,
            3975795667,
            3976087672,
            1125667736,
            513174743,
            1240771857,
            1241063862,
            968546124,
            968838129,
            3159291991,
            3159583996,
            1865153222,
            1865445227,
            785746337,
            786038342,
            2600503131,
            2600795136,
            2999959516,
            3000251521,
            943917744,
            944209749,
            2347674411,
            809024113,
            120854016,
            809316118,
            2073002016,
            2073294021,
            2910866523,
            1118565993,
            141040449,
            141332454,
            783817628,
            4113331167,
            160861990,
            160928680,
            3722562964,
            3722854969,
            3284079804,
            3284371809,
            3889906176,
            3890198181,
            1070549456,
            103298714,
            232621568,
            444212367,
            444504372,
            1646162620,
            2738059605,
            1750487903,
            4024826564,
            2581114299,
            1305311240,
            1305603245,
            973056614,
            3903314428,
            3903606433,
            973348619,
            3028410300,
            3828427248,
            3828719253,
            2033838701,
            2034130706,
            670239602,
            670464917,
            670531607,
            1411264265,
            3108157962,
            3108449967,
            3997760971,
            3998052976,
            332974955,
            333200270,
            3889645223,
            3360666333,
            3360733023,
            1198011188,
            1198303193,
            3804459804,
            3804751809,
            133362805,
            2604838009,
            382278005,
            382570010,
            4250125462,
            4250417467,
            4239569506,
            4239861511,
            858891554,
            3763795911,
            3764087916,
            122016988,
            122308993,
            2100280149,
            2100572154,
            1987719555,
            1988011560,
            2576035970,
            157847089,
            158139094,
            2408789584,
            2409081589,
            65718581,
            220896338,
            2631854496,
            2632146501,
            663930187,
            664222192,
            2450476125,
            2450768130,
            4187509635,
            4187734950,
            4187801640,
            1660720207,
            1661012212,
            1039090410,
            201001902,
            38903085,
            201293907,
            1011373350,
            1011665355,
            900134523,
            900426528,
            3596085430,
            3571639929,
            3626677676,
            196090434,
            196382439,
            3094939550,
            3884695904,
            3884987909,
            1499063199,
            1499355204,
            3519688928,
            3024418002,
            3574365467,
            927775002,
            3974909302,
            3975201307,
            121024122,
            1044635541,
            1044702231,
            1325261889,
            4133867637,
            4134159642,
            1658533687,
            2577171758,
            3351280735,
            2585485501,
            2585777506,
            1590807178,
            2140309531,
            2140601536,
            2561232351,
            2561524356,
            2461239273,
            2461531278,
            842405505,
            2064248156,
            2064540161,
            2052956035,
            2053248040,
            2315640770,
            504281929,
            168364795,
            3370926058,
            1928102495,
            1928394500,
            2634915076,
            1446556802,
            1446848807,
            338594153,
            338886158,
            2072600613,
            2072892618,
            489282124,
            489574129,
            1249648644,
            2597107804,
            4067998605,
            3672476169,
        };

        private static List<Type> _protoType = new List<Type>
      {
            typeof(C2S_Login),
            typeof(S2C_LoginAck),

       };

        private static readonly Dictionary<RuntimeTypeHandle, MessageParser> Parsers = new Dictionary<RuntimeTypeHandle, MessageParser>()
        {
            {typeof(C2S_Login).TypeHandle,C2S_Login.Parser },
            {typeof(S2C_LoginAck).TypeHandle,S2C_LoginAck.Parser },
        };

        public static MessageParser GetMessageParser(RuntimeTypeHandle typeHandle)
        {
            Parsers.TryGetValue(typeHandle, out MessageParser messageParser);
            return messageParser;
        }

        public static Type GetProtoTypeByProtoId(uint protoId)
        {
            int index = _protoId.IndexOf(protoId);
            return _protoType[index];
        }

        public static uint GetProtoIdByProtoType(Type type)
        {
            int index = _protoType.IndexOf(type);
            return _protoId[index];
        }

        public static bool ContainProtoId(uint protoId)
        {
            return _protoId.Contains(protoId);
        }

        public static bool ContainProtoType(Type type)
        {
            return _protoType.Contains(type);
        }

    }
}
